<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui">

     <h:head>
		<title>Window title</title>
     </h:head>
     <h:body>
		<ui:composition template="/templates/mainLayout.xhtml">
			<ui:define name="windowTitle">
				#{msgs.timesheet}
			</ui:define>
			
			<ui:define name="content">
				<h:outputText styleClass="error" value="#{msgs.loginmsg}" rendered="#{not login.loggedIn}"/>
				<h:form rendered="#{login.loggedIn}">
					<h:panelGrid id="grid" columns="4" cellpadding="10">
				        <p:outputLabel value="#{msgs.empNo}"/>
				        <p:outputLabel value="#{employeeDetails.currentEmployee.empNumber}"/>
				        <p:outputLabel value="#{msgs.weekNumber}"/>
				        <p:outputLabel value="#{timesheetDetails.getCurrentTimesheet(employeeDetails.currentEmployee).weekNumber}"/>
				        <p:outputLabel value="#{msgs.empName}"/>
				        <p:outputLabel value="#{employeeDetails.currentEmployee.name}"/>
				        <p:outputLabel value="#{msgs.weekEnding}"/>
				        <p:outputLabel value="#{timesheetDetails.getCurrentTimesheet(employeeDetails.currentEmployee).weekEnding}"/>
			    	</h:panelGrid>
			    	<p:dataTable var="list" value="#{timesheetDetails.getCurrentTimesheet(employeeDetails.currentEmployee)}" >
			    	<p:column headerText="#{msgs.timesheet}">
					<p:dataTable var="row" value="#{timesheetDetails.getCurrentTimesheet(employeeDetails.currentEmployee).details}" >
						<p:column>
							<f:facet name="header">#{msgs.project}</f:facet>
							<h:outputText value="#{row.projectID}" />
							<f:facet name="footer">#{msgs.total}</f:facet>
						</p:column>
						<p:column>
							<f:facet name="header">#{msgs.workpackage}</f:facet>
							<h:outputText value="#{row.workPackage}" />
						</p:column>
						<p:column>
							<f:facet name="header">#{msgs.total}</f:facet>
							<h:outputText value="#{row.sum}" />
							<f:facet name="footer">#{list.totalHours}</f:facet>
						</p:column>
						<p:column>
							<f:facet name="header">#{msgs.sat}</f:facet>
							<h:outputText value="#{row.hoursForWeek[0]}" />
							<f:facet name="footer">#{list.dailyHours[0]}</f:facet>
						</p:column>
						<p:column>
							<f:facet name="header">#{msgs.sun}</f:facet>
							<h:outputText value="#{row.hoursForWeek[1]}" />
							<f:facet name="footer">#{list.dailyHours[1]}</f:facet>
						</p:column>
						<p:column>
							<f:facet name="header">#{msgs.mon}</f:facet>
							<h:outputText value="#{row.hoursForWeek[2]}" />
							<f:facet name="footer">#{list.dailyHours[2]}</f:facet>
						</p:column>
						<p:column>
							<f:facet name="header">#{msgs.tue}</f:facet>
							<h:outputText value="#{row.hoursForWeek[3]}" />
							<f:facet name="footer">#{list.dailyHours[3]}</f:facet>
						</p:column>
						<p:column>
							<f:facet name="header">#{msgs.wed}</f:facet>
							<h:outputText value="#{row.hoursForWeek[4]}" />
							<f:facet name="footer">#{list.dailyHours[4]}</f:facet>
						</p:column>
						<p:column>
							<f:facet name="header">#{msgs.thu}</f:facet>
							<h:outputText value="#{row.hoursForWeek[5]}" />
							<f:facet name="footer">#{list.dailyHours[5]}</f:facet>
						</p:column>
						<p:column>
							<f:facet name="header">#{msgs.fri}</f:facet>
							<h:outputText value="#{row.hoursForWeek[6]}" />
							<f:facet name="footer">#{list.dailyHours[6]}</f:facet>
						</p:column>
						<p:column width="350">
							<f:facet name="header">#{msgs.notes}</f:facet>
							<h:outputText value="#{row.notes}" />
						</p:column>
					</p:dataTable>
					</p:column>
					</p:dataTable>
					<p:spacer height="10" />
					<p:commandButton action="#{timesheetDetails.addTimesheet}" value="#{msgs.create}" 
									rendered="#{not timesheetDetails.hasCurrentTimesheet(employeeDetails.currentEmployee)}"/>
					<p:commandButton action="editTimesheet?faces-redirect=true" value="#{msgs.edit}"
									rendered="#{timesheetDetails.hasCurrentTimesheet(employeeDetails.currentEmployee)}"/>
					<p:commandButton action="#{timesheetDetails.addRows}" value="#{msgs.addRow}"
									rendered="#{timesheetDetails.hasCurrentTimesheet(employeeDetails.currentEmployee)}"/>
				</h:form>
			</ui:define>
			
		</ui:composition>
     </h:body>
</html>