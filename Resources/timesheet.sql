CREATE DATABASE TES;

CREATE USER 'employee'@'localhost' IDENTIFIED BY 'password';
CREATE USER 'employee'@'%' IDENTIFIED BY 'password';
GRANT ALL PRIVILEGES ON TES.* TO 'employee'@'localhost' WITH GRANT OPTION;
GRANT ALL PRIVILEGES ON TES.* TO 'employee'@'%' WITH GRANT OPTION;

USE TES;

-- create table CREDENTIALS
CREATE TABLE TES.CREDENTIALS
(
	EMPLOYEE_USERNAME   VARCHAR(50) NOT NULL,
    EMPLOYEE_PASSWORD   VARCHAR(50) NOT NULL,
    PRIMARY KEY(EMPLOYEE_USERNAME)
); 

-- CREATE TABLE EMPLOYEE
CREATE TABLE TES.EMPLOYEE
(
	EMPLOYEE_ID         INTEGER      NOT NULL AUTO_INCREMENT,
    EMPLOYEE_NAME       VARCHAR(100) NOT NULL,
	EMPLOYEE_USERNAME   VARCHAR(50)  NOT NULL UNIQUE,
	PRIMARY KEY(EMPLOYEE_ID),
    FOREIGN KEY(EMPLOYEE_USERNAME) REFERENCES TES.CREDENTIALS(EMPLOYEE_USERNAME) ON DELETE CASCADE
 );

-- create table TIMESHEET
CREATE TABLE TES.TIMESHEET
(
    EMPLOYEE_ID     INTEGER  NOT NULL,
    END_WEEK        DATE     NOT NULL,
	PRIMARY KEY(EMPLOYEE_ID, END_WEEK),
	FOREIGN KEY(EMPLOYEE_ID) REFERENCES TES.EMPLOYEE(EMPLOYEE_ID) ON DELETE CASCADE
);

-- create table TIMESHEETROW
CREATE TABLE TES.TIMESHEETROW
(
    ID              INTEGER       NOT NULL AUTO_INCREMENT,
    EMPLOYEE_ID     INTEGER       NOT NULL,
    END_WEEK        DATE          NOT NULL,
    PROJECT_ID      INTEGER       NOT NULL DEFAULT 0,
	WORK_PACKAGE    VARCHAR(40)   NOT NULL DEFAULT "",
	NOTES           VARCHAR(200)  NULL,
	SAT             DECIMAL(3,1)  NULL,
    SUN             DECIMAL(3,1)  NULL,
    MON             DECIMAL(3,1)  NULL,
    TUE             DECIMAL(3,1)  NULL,
    WED             DECIMAL(3,1)  NULL,
    THU             DECIMAL(3,1)  NULL,
    FRI             DECIMAL(3,1)  NULL,
	PRIMARY KEY(ID, EMPLOYEE_ID, END_WEEK, PROJECT_ID, WORK_PACKAGE),
    FOREIGN KEY(EMPLOYEE_ID, END_WEEK) REFERENCES TES.TIMESHEET(EMPLOYEE_ID, END_WEEK) ON DELETE CASCADE
);


-- Load data into CREDENTIALS table
INSERT INTO TES.CREDENTIALS VALUES('admin', 'admin');
INSERT INTO TES.CREDENTIALS VALUES('karan', 'karan');
INSERT INTO TES.CREDENTIALS VALUES('ryan', 'ryan');
INSERT INTO TES.CREDENTIALS VALUES('test', 'test');

-- Load data into EMPLOYEE table
INSERT INTO TES.EMPLOYEE VALUES('1', 'Admin admin', 'admin');
INSERT INTO TES.EMPLOYEE VALUES('2', 'Karanveer Khanna', 'karan');
INSERT INTO TES.EMPLOYEE VALUES('3', 'Ryan Liang', 'ryan');
INSERT INTO TES.EMPLOYEE VALUES('4', 'Test test', 'test');

-- Load data into TIMESHEET table
INSERT INTO TES.TIMESHEET VALUES('1', '2018-11-09');
INSERT INTO TES.TIMESHEET VALUES('1', '2018-10-26');
INSERT INTO TES.TIMESHEET VALUES('2', '2018-11-02');
INSERT INTO TES.TIMESHEET VALUES('2', '2018-11-09');
INSERT INTO TES.TIMESHEET VALUES('2', '2018-10-26');
INSERT INTO TES.TIMESHEET VALUES('3', '2018-11-02');
INSERT INTO TES.TIMESHEET VALUES('3', '2018-11-09');
INSERT INTO TES.TIMESHEET VALUES('3', '2018-10-26');
INSERT INTO TES.TIMESHEET VALUES('4', '2018-11-02');
INSERT INTO TES.TIMESHEET VALUES('4', '2018-11-09');
INSERT INTO TES.TIMESHEET VALUES('4', '2018-10-26');

-- Load data into TIMESHEETROW table
INSERT INTO TES.TIMESHEETROW VALUES(1, '1', '2018-10-26', '1', 'WP 1', 'NOTES 1', 0, 0, '1.2', '1.2','1.2','1.2','1.2');
INSERT INTO TES.TIMESHEETROW VALUES(2, '1', '2018-10-26', '1', 'WP 2', 'NOTES 2', 0, 0, '2.2', '2.2','2.2','2.2','2.2');
INSERT INTO TES.TIMESHEETROW VALUES(3, '1', '2018-10-26', '2', 'WP 1', 'NOTES 3', 0, 0, '3.2', '2.2','1.2','3.2','1.2');
INSERT INTO TES.TIMESHEETROW VALUES(4, '1', '2018-10-26', '1', 'WP 4', 'NOTES 4', 0, 0, '2.2', '1.2','4.2','1.2', 0);
INSERT INTO TES.TIMESHEETROW VALUES(5, '1', '2018-11-09', '1', 'WP 1', 'NOTES 1', 0, 0, '1.2', '1.2','1.2','1.2','1.2');
INSERT INTO TES.TIMESHEETROW VALUES(6, '1', '2018-11-09', '1', 'WP 2', 'NOTES 2', 0, 0, '2.2', '2.2','2.2','2.2','2.2');
INSERT INTO TES.TIMESHEETROW VALUES(7, '1', '2018-11-09', '2', 'WP 3', 'NOTES 3', 0, 0, '3.2', '2.2','1.2','3.2','1.2');
INSERT INTO TES.TIMESHEETROW VALUES(8, '1', '2018-11-09', '4', 'WP 4', 'NOTES 4', 0, 0, '2.2', '1.2','4.2','1.2', 0);
INSERT INTO TES.TIMESHEETROW VALUES(9, '2', '2018-10-26', '1', 'WP 1', 'NOTES 1', 0, 0, '1.2', '1.2','1.2','1.2','1.2');
INSERT INTO TES.TIMESHEETROW VALUES(10, '2', '2018-10-26', '1', 'WP 2', 'NOTES 2', 0, 0, '2.2', '2.2','2.2','2.2','2.2');
INSERT INTO TES.TIMESHEETROW VALUES(11, '2', '2018-10-26', '2', 'WP 1', 'NOTES 3', 0, 0, '3.2', '2.2','1.2','3.2','1.2');
INSERT INTO TES.TIMESHEETROW VALUES(12, '2', '2018-10-26', '1', 'WP 4', 'NOTES 4', 0, 0, '2.2', '1.2','4.2','1.2', 0);
INSERT INTO TES.TIMESHEETROW VALUES(13, '2', '2018-11-09', '1', 'WP 1', 'NOTES 1', 0, 0, '1.2', '1.2','1.2','1.2','1.2');
INSERT INTO TES.TIMESHEETROW VALUES(14, '2', '2018-11-09', '1', 'WP 2', 'NOTES 2', 0, 0, '2.2', '2.2','2.2','2.2','2.2');
INSERT INTO TES.TIMESHEETROW VALUES(15, '2', '2018-11-09', '2', 'WP 3', 'NOTES 3', 0, 0, '3.2', '2.2','1.2','3.2','1.2');
INSERT INTO TES.TIMESHEETROW VALUES(16, '2', '2018-11-09', '4', 'WP 4', 'NOTES 4', 0, 0, '2.2', '1.2','4.2','1.2', 0);
INSERT INTO TES.TIMESHEETROW VALUES(17, '3', '2018-10-26', '1', 'WP 1', 'NOTES 1', 0, 0, '1.2', '1.2','1.2','1.2','1.2');
INSERT INTO TES.TIMESHEETROW VALUES(18, '3', '2018-10-26', '1', 'WP 2', 'NOTES 2', 0, 0, '2.2', '2.2','2.2','2.2','2.2');
INSERT INTO TES.TIMESHEETROW VALUES(19, '3', '2018-10-26', '2', 'WP 1', 'NOTES 3', 0, 0, '3.2', '2.2','1.2','3.2','1.2');
INSERT INTO TES.TIMESHEETROW VALUES(20, '3', '2018-10-26', '1', 'WP 4', 'NOTES 4', 0, 0, '2.2', '1.2','4.2','1.2', 0);
INSERT INTO TES.TIMESHEETROW VALUES(21, '3', '2018-11-09', '1', 'WP 1', 'NOTES 1', 0, 0, '1.2', '1.2','1.2','1.2','1.2');
INSERT INTO TES.TIMESHEETROW VALUES(22, '3', '2018-11-09', '1', 'WP 2', 'NOTES 2', 0, 0, '2.2', '2.2','2.2','2.2','2.2');
INSERT INTO TES.TIMESHEETROW VALUES(23, '3', '2018-11-09', '2', 'WP 3', 'NOTES 3', 0, 0, '3.2', '2.2','1.2','3.2','1.2');
INSERT INTO TES.TIMESHEETROW VALUES(24, '3', '2018-11-09', '4', 'WP 4', 'NOTES 4', 0, 0, '2.2', '1.2','4.2','1.2', 0);
INSERT INTO TES.TIMESHEETROW VALUES(25, '4', '2018-10-26', '1', 'WP 1', 'NOTES 1', 0, 0, '1.2', '1.2','1.2','1.2','1.2');
INSERT INTO TES.TIMESHEETROW VALUES(26, '4', '2018-10-26', '1', 'WP 2', 'NOTES 2', 0, 0, '2.2', '2.2','2.2','2.2','2.2');
INSERT INTO TES.TIMESHEETROW VALUES(27, '4', '2018-10-26', '2', 'WP 1', 'NOTES 3', 0, 0, '3.2', '2.2','1.2','3.2','1.2');
INSERT INTO TES.TIMESHEETROW VALUES(28, '4', '2018-10-26', '1', 'WP 4', 'NOTES 4', 0, 0, '2.2', '1.2','4.2','1.2', 0);
INSERT INTO TES.TIMESHEETROW VALUES(29, '4', '2018-11-09', '1', 'WP 1', 'NOTES 1', 0, 0, '1.2', '1.2','1.2','1.2','1.2');
INSERT INTO TES.TIMESHEETROW VALUES(30, '4', '2018-11-09', '1', 'WP 2', 'NOTES 2', 0, 0, '2.2', '2.2','2.2','2.2','2.2');
INSERT INTO TES.TIMESHEETROW VALUES(31, '4', '2018-11-09', '2', 'WP 3', 'NOTES 3', 0, 0, '3.2', '2.2','1.2','3.2','1.2');
INSERT INTO TES.TIMESHEETROW VALUES(32, '4', '2018-11-09', '4', 'WP 4', 'NOTES 4', 0, 0, '2.2', '1.2','4.2','1.2', 0);
